# Файловая система Linux
### Стандартная структура файловой системы Linux и различие с ФС Windows
 Во всех \*nix системах файловая система представлена одним деревом с выделенным корневым каталогом /. В отличии от Windows, где каждый том диска является отдельным пространством имен, в Unix пространство имен одно. Из основных корневых подкаталогов первого уровня можно выделить несколько фундаментальных для всех систем:
 1. /bin -  бинарные файлы и сценарии
 2. /boot -  файлы ядра
 3. /sbin -  минимально необходимые для работы бинарные файлы
 4. /media - точки монтирования файловых систем на внешних накопителях
 5. /lib - файлы библиотек C\C++ и пр.
 6. /proc - точка монтирования файловой системы procfs, речь которой шла в [[processes]]
 7. /sys - точка монтирования файловой системы sysfs для объектов ядра(интерфейсы, структуры и прочее)
 8. /run - локальные сокеты и именованные каналы для общения  процессов
 9. /tmp - точка монтирования tmps, которая содержит временные файлы; очищается при каждом запуске системы.
 10. /dev - содержит файлы устройств, терминалов и пр.
### (Де)монтирование файловых систем. Команды mount и unmount.
Монтирование файловой системы происходит путем указания параметров команде **mount**. Демонтируется файловая система командой **unmount**.
### Проверка файловой системы и fstab. Команда fsck.
### Типы файлов
В системах Linux сущестует семь типов файлов:
1. обычные файлы - все файлы, содержащие текстовую\бинаруню информацию, которые представляют собой не что иное, как последоватьность байтов: файлы исходных кодов, мультимедия файлы, бинарные исполняемые и пр
2. каталоги - содержат ссылки на файлы и другие каталоги (родительские и дочерние) 
3. файлы блочных устройств - специальные файлы, которые являются шлюзами для коммуникации с аппаратными устройствами
4. файлы символьных устройств - практически не отличаются от файлов блочных устройств 
5. локальные сокеты - точки коммуникации между процессами
6. именованные каналы (FIFO) - аналог сокетов, но использует другой метод передачи данных.
### Обычные файлы и каталоги
Самые стандартные объекты, с которыми сталкивался любой пользователь любой ОС.  Как было сказано выше, являются лишь структурированным или "не очень" набором байтов. Сказать особо нечего, все и так понятно.
### Блочные и символьные устройства 
Элегантное решение проблемы передачи данных между ядром и аппаратным обеспечением. Для ядра и пользователя довольно удобна абстракция в виде файла. Реализуется чтение и запись через специальные драйвера устройств.
### Локальные сокеты и именованные каналы (FIFO)
Структуры, используемые для межпроцессорного взаимодействия. 
- Сокеты - реализуют двунаправленную передачу.
- Именованные каналы - реализуют однонаправленную передачу.
Именнованные каналы используются для схемы producer-consumer (производитель-потребитель). Сокет же предназначен для "клиент-серверной" организации общения процессов.
### Символические и жесткие ссылки
Символические ссылки - аналог ярлыков в системах Windows. В целом, ссылки являются "представителями" других файлов по всей файловой системе (вообщем - предназначены для имитации присутствия файлов). Символические ссылки отличаются от жестких тем, что жесткая ссылка ссылается на inode (индексный дескриптор файла), а символическая на имя. То есть символическая просто содержит имя путь, а жесткая - уникальное значение, которое содержится в метаданных файла. Таким образом, если переместить исходный файл в другую директорию и ссылка жесткая, то синхронизация не пострадает, т.к. inode останется прежним. Иначе работает символическая ссылка - при удалении или перемещении из текущей директории файла синхронизация нарушается. Создаются ссылки командой **ln**.
### Метаданные, атрибуты и режимы файлов. Команды chown, chgrp, chmod.
Как было сказано ранее, файлы имеют метаданные:
1. Имя
2. Владельца и группу
3. Дату модификации 
4. Индексный дескриптор inode
5. Количество ссылок на данный файл.
Каждый объект файловой системы имеет режим доступа, который описывается трехзначным восьмибитным значением - первый слева разряд описывает права пользователя на файл, второй - права группы, третий - права остальных. Помимо режима доступа, также описывается режим выполнения - биты SUID, GUID(о которых речь шла в [[access_mng]]) и sticky бит. 

### ACL - Access contol lists (списки управления доступом)